<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总览 | Chrome 扩展(插件) 开发教程</title>
    <meta name="generator" content="VuePress 1.5.2">
    <script data-ad-client="ca-pub-6048304318304307" async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="Chrome 扩展(插件) 开发教程 2020 最新 Chrome 扩展官方文档教程中文版，从零开始开发一个浏览器插件教程。">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.9cda45ef.js" as="script"><link rel="preload" href="/assets/js/2.6a11313b.js" as="script"><link rel="preload" href="/assets/js/11.6ed69219.js" as="script"><link rel="prefetch" href="/assets/js/10.a153926b.js"><link rel="prefetch" href="/assets/js/12.9ea18c60.js"><link rel="prefetch" href="/assets/js/13.8861b59c.js"><link rel="prefetch" href="/assets/js/14.49edad87.js"><link rel="prefetch" href="/assets/js/15.318fdb84.js"><link rel="prefetch" href="/assets/js/16.f7391ad9.js"><link rel="prefetch" href="/assets/js/17.a3ddb96f.js"><link rel="prefetch" href="/assets/js/18.5a70d51b.js"><link rel="prefetch" href="/assets/js/19.010a926d.js"><link rel="prefetch" href="/assets/js/20.8f480658.js"><link rel="prefetch" href="/assets/js/21.b19321c3.js"><link rel="prefetch" href="/assets/js/22.14ca413a.js"><link rel="prefetch" href="/assets/js/23.83a1bb15.js"><link rel="prefetch" href="/assets/js/24.3b1a084e.js"><link rel="prefetch" href="/assets/js/25.6d8d8d31.js"><link rel="prefetch" href="/assets/js/26.808f80e9.js"><link rel="prefetch" href="/assets/js/27.3aa39da1.js"><link rel="prefetch" href="/assets/js/28.07e507ff.js"><link rel="prefetch" href="/assets/js/3.c15672e3.js"><link rel="prefetch" href="/assets/js/4.2a16782f.js"><link rel="prefetch" href="/assets/js/5.cead1632.js"><link rel="prefetch" href="/assets/js/6.409e9887.js"><link rel="prefetch" href="/assets/js/7.1456bbbf.js"><link rel="prefetch" href="/assets/js/8.4f631dbf.js"><link rel="prefetch" href="/assets/js/9.36b7e61f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Chrome 扩展(插件) 开发教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/what-is-extensions.html" class="nav-link">
  官方中文版教程
</a></div><div class="nav-item"><a href="/blog/pornhub-video-download-extension.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/facert/chrome-extension-guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/what-is-extensions.html" class="nav-link">
  官方中文版教程
</a></div><div class="nav-item"><a href="/blog/pornhub-video-download-extension.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/facert/chrome-extension-guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/blog/pornhub-video-download-extension.html" class="sidebar-heading clickable"><span>Blog</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active open"><span>官方教程</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/what-is-extensions.html" class="sidebar-link">什么是扩展</a></li><li><a href="/guide/getstarted.html" class="sidebar-link">入门教程</a></li><li><a href="/guide/overview.html" aria-current="page" class="active sidebar-link">总览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/overview.html#总览" class="sidebar-link">总览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/overview.html#扩展文件" class="sidebar-link">扩展文件</a></li><li class="sidebar-sub-header"><a href="/guide/overview.html#架构" class="sidebar-link">架构</a></li><li class="sidebar-sub-header"><a href="/guide/overview.html#使用-chrome-api" class="sidebar-link">使用 Chrome API</a></li><li class="sidebar-sub-header"><a href="/guide/overview.html#页面之间的通信" class="sidebar-link">页面之间的通信</a></li><li class="sidebar-sub-header"><a href="/guide/overview.html#保存数据和隐身模式" class="sidebar-link">保存数据和隐身模式</a></li><li class="sidebar-sub-header"><a href="/guide/overview.html#下一步" class="sidebar-link">下一步</a></li></ul></li></ul></li><li><a href="/guide/manifest.html" class="sidebar-link">Manifest 文件格式</a></li><li><a href="/guide/background_content.html" class="sidebar-link">使用后台脚本管理事件</a></li><li><a href="/guide/user_interface.html" class="sidebar-link">设计交互界面</a></li><li><a href="/guide/content_scripts.html" class="sidebar-link">内容脚本 Content Scripts</a></li><li><a href="/guide/permission_warnings.html" class="sidebar-link">声明权限并警告用户</a></li><li><a href="/guide/options.html" class="sidebar-link">给用户选项</a></li><li><a href="/guide/devguide.html" class="sidebar-link">开发扩展</a></li><li><a href="/guide/performance.html" class="sidebar-link">达到最佳性能</a></li><li><a href="/guide/user_privacy.html" class="sidebar-link">保护用户隐私</a></li><li><a href="/guide/tut_debugging.html" class="sidebar-link">调试扩展</a></li><li><a href="/guide/tut_oauth.html" class="sidebar-link">OAuth2</a></li><li><a href="/guide/a11y.html" class="sidebar-link">辅助功能（a11y）</a></li><li><a href="/guide/contentSecurityPolicy.html" class="sidebar-link">内容安全政策（CSP）</a></li><li><a href="/guide/xhr.html" class="sidebar-link">跨域XMLHttpRequest</a></li><li><a href="/guide/messaging.html" class="sidebar-link">消息传递</a></li><li><a href="/guide/nativeMessaging.html" class="sidebar-link">本机消息</a></li><li><a href="/guide/match_patterns.html" class="sidebar-link">匹配模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="总览"><a href="#总览" class="header-anchor">#</a> 总览</h2> <p>扩展程序是 HTML，CSS，JavaScript，图片和其他文件的压缩包，可自定义 Google Chrome 浏览器使用体验。扩展程序是使用 web 技术构建的，可以使用浏览器的开放网络提供的相同 API。</p> <p>扩展具有广泛的功能可能性。他们可以修改用户看到的 Web 内容并与之交互或扩展和更改浏览器本身的行为。</p> <p>总的来说扩展是一个网关，使 Chrome 浏览器成为最个性化的浏览器。</p> <h3 id="扩展文件"><a href="#扩展文件" class="header-anchor">#</a> 扩展文件</h3> <p>每个扩展的文件类型和目录数量有所不同，但都必须有 manifest。 一些基本但有用的扩展程序可能仅由 manifest 及其工具栏图标组成。</p> <p>名为 manifest.json 的文件为浏览器提供了有关扩展的信息，例如最重要的文件和扩展可能使用的功能。</p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;name&quot;: &quot;My Extension&quot;,
    &quot;version&quot;: &quot;2.1&quot;,
    &quot;description&quot;: &quot;Gets information from Google.&quot;,
    &quot;icons&quot;: {
      &quot;128&quot;: &quot;icon_16.png&quot;,
      &quot;128&quot;: &quot;icon_32.png&quot;,
      &quot;128&quot;: &quot;icon_48.png&quot;,
      &quot;128&quot;: &quot;icon_128.png&quot;
    },
    &quot;background&quot;: {
      &quot;persistent&quot;: false,
      &quot;scripts&quot;: [&quot;background_script.js&quot;]
    },
    &quot;permissions&quot;: [&quot;https://*.google.com/&quot;, &quot;activeTab&quot;],
    &quot;browser_action&quot;: {
      &quot;default_icon&quot;: &quot;icon_16.png&quot;,
      &quot;default_popup&quot;: &quot;popup.html&quot;
    }
  }
</code></pre></div><p>扩展程序必须在浏览器工具栏中有一个图标。通过工具栏图标可以轻松访问并让用户知道安装了哪些扩展。大多数用户将通过单击图标来与使用弹出窗口的扩展程序进行交互。</p> <h4 id="指向文件"><a href="#指向文件" class="header-anchor">#</a> 指向文件</h4> <p>扩展文件可以通过使用相对 URL 来引用，就像普通 HTML 页面中的文件一样。</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>images/my_image.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>此外，还可以使用绝对 URL 访问每个文件。</p> <div class="language- extra-class"><pre class="language-text"><code>chrome-extension://&lt;extensionID&gt;/&lt;pathToFile&gt;
</code></pre></div><p>在绝对 URL 中，&lt;extensionID&gt; 是扩展系统为每个扩展生成的唯一标识符。 可以访问 URL chrome://extensions 查看所有已加载扩展名的 ID 。&lt;pathToFile&gt; 是扩展的顶层文件夹下文件的位置；它根据相对 URL 匹配。</p> <p>在使用解压缩后的扩展程序时，扩展程序 ID 可能会更改。 具体来说，如果从其他目录加载扩展，则解压缩扩展的 ID 会发生变化；扩展名打包后，ID将再次更改。如果扩展程序的代码依赖于绝对 URL，则可以使用 chrome.runtime.getURL() 方法来避免在开发过程中对 ID 进行硬编码。</p> <h3 id="架构"><a href="#架构" class="header-anchor">#</a> 架构</h3> <p>扩展的架构取决于其功能，但许多健壮的扩展都包括多个组件：</p> <ul><li><a href="/guide/manifest.html">Manifest</a></li> <li><a href="/guide/background_content.html">后台脚本</a></li> <li><a href="/guide/user_interface.html">交互界面</a></li> <li><a href="/guide/content_scripts.html">内容脚本</a></li> <li><a href="/guide/options.html">选项页面</a></li></ul> <h5 id="后台脚本"><a href="#后台脚本" class="header-anchor">#</a> 后台脚本</h5> <p>后台脚本是扩展的事件处理程序。它包含对扩展很重要的浏览器事件的监听器。它将处于休眠状态，直到触发事件执行所指示的逻辑为止。有效的后台脚本仅在需要时才加载，而在空闲时则不加载。</p> <h5 id="交互界面"><a href="#交互界面" class="header-anchor">#</a> 交互界面</h5> <p>扩展程序的用户界面应该是有目的且简单的。用户界面应自定义或增强浏览体验，这样不会分散用户注意力。大多数扩展程序有<a href="https://developer.chrome.com/extensions/browserAction" target="_blank" rel="noopener noreferrer">浏览器操作<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或<a href="https://developer.chrome.com/extensions/pageAction" target="_blank" rel="noopener noreferrer">页面操作<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，但也可以包含其他形式的 UI，例如<a href="https://developer.chrome.com/contextMenus" target="_blank" rel="noopener noreferrer">上下文菜单<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<a href="https://developer.chrome.com/extensions/omniBox" target="_blank" rel="noopener noreferrer">地址栏<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或<a href="https://developer.chrome.com/extensions/commands" target="_blank" rel="noopener noreferrer">键盘快捷键<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>扩展的 UI 页面（例如 popup 弹出窗口）可以包含具有 JavaScript 逻辑的普通 HTML。扩展程序还可以调用 tabs.create 或 window.open() 来显示扩展程序的其他 HTML 文件。</p> <p>用到页面操作和弹出窗口的扩展可以使用 <a href="https://developer.chrome.com/extensions/declarativeContent" target="_blank" rel="noopener noreferrer">declarative content<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> API 在后台脚本中为用户设置规则。满足条件后，后台脚本会与弹出窗口进行通信，以使用户可点击其图标。</p> <p><img src="data:image/png;base64,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" alt="popuparc"></p> <h5 id="内容脚本"><a href="#内容脚本" class="header-anchor">#</a> 内容脚本</h5> <p>扩展使用内容脚本读取或写入网页。内容脚本包含 JavaScript，该 JavaScript 在已加载到浏览器的页面的上下文中执行。内容脚本读取和修改浏览器访问网页的 DOM 元素。</p> <p><img src="/assets/img/contentscriptarc.45698fb9.png" alt="contentscriptarc.png"></p> <p>内容脚本可以使用 storage API 交换消息并存储值来与其父扩展进行通信。</p> <p><img src="/assets/img/messagingarc.7d9a5f1f.png" alt="messagingarc"></p> <h5 id="选项页面"><a href="#选项页面" class="header-anchor">#</a> 选项页面</h5> <p>就像扩展程序允许用户自定义 Chrome 浏览器一样，选项页面也允许自定义扩展程序。选项可用于启用特性，并允许用户选择与他们的需求相关的功能。</p> <h3 id="使用-chrome-api"><a href="#使用-chrome-api" class="header-anchor">#</a> 使用 Chrome API</h3> <p>扩展程序除了可以访问与网页相同的 API 外，还可以使用特定于扩展程序的API，这些 API 可以与浏览器紧密集成。扩展程序和网页都可以访问标准window.open() 方法来打开 URL，但是扩展程序可以使用 Chrome API tabs.create 方法来指定应在哪个窗口中显示 URL。</p> <h5 id="同步-vs-异步"><a href="#同步-vs-异步" class="header-anchor">#</a> 同步 vs 异步</h5> <p>大多数 Chrome API 方法都是异步的：它们立即返回无需等待操作完成。如果扩展需要知道异步操作的结果，则可以将回调函数传递给方法。该方法返回后，回调可能会稍后执行，也可能要晚得多。</p> <p>如扩展程序需要将用户当前选择的标签重定向到新的 URL，则需要获取当前标签的ID，然后将该标签的地址更新为新的 URL。</p> <p>如果 <a href="https://developer.chrome.com/tabs#method-query" target="_blank" rel="noopener noreferrer">tabs.query<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 方法是同步的，则可能如下所示。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">//THIS CODE DOESN'T WORK</span>
  <span class="token keyword">var</span> tab <span class="token operator">=</span> chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'active'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//WRONG!!!</span>
  chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span>url<span class="token operator">:</span>newUrl<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someOtherFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>该方法将失败，因为 query() 是异步的。 它不等待任务完成就会返回，并且不返回值。当回调参数在其签名中存在时，该方法才能够异步调用。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// Signature for an asynchronous method</span>
  chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>object queryInfo<span class="token punctuation">,</span> <span class="token keyword">function</span> callback<span class="token punctuation">)</span>
</code></pre></div><p>要正确查询选项卡并更新其 URL，扩展名必须使用 callback 参数。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">//THIS CODE WORKS</span>
  chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'active'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>tabs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span>url<span class="token operator">:</span> newUrl<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someOtherFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在上面的代码中，这些行按以下顺序执行：1、4、2。仅在获得有关当前所选选项卡的信息之后，才调用 query() 的回调函数，然后执行第 2 行。 在 query() 返回之后的某个时间发生。 尽管 update() 也是异步的，但是代码没有使用回调参数，因为扩展对更新结果没做其他事情。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// Synchronous methods have no callback option and returns a type of string</span>
  string chrome<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>此方法以字符串形式同步返回 URL，并且不执行其他任何异步工作。</p> <h5 id="更多细节"><a href="#更多细节" class="header-anchor">#</a> 更多细节</h5> <p>有关更多信息，请浏览 <a href="https://developer.chrome.com/extensions/api_index" target="_blank" rel="noopener noreferrer">Chrome API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 参考文档并观看以下视频 <a href="https://youtu.be/bmxr75CV36A" target="_blank" rel="noopener noreferrer">Youtube<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="页面之间的通信"><a href="#页面之间的通信" class="header-anchor">#</a> 页面之间的通信</h3> <p>扩展中的不同组件通常需要相互通信。通过使用 <a href="https://developer.chrome.com/extensions/extension" target="_blank" rel="noopener noreferrer">chrome.extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 方法，例如getViews() 和 getBackgroundPage()，不同的 HTML 页面可以找到彼此。 一旦页面引用了其他扩展页面，第一个页面就可以调用其他页面上的函数并操纵其 DOM 元素。 此外，扩展的所有组件都可以访问使用 Storage API 存储值，和通过<a href="https://developer.chrome.com/extensions/messaging" target="_blank" rel="noopener noreferrer">消息传递<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行通信。</p> <h3 id="保存数据和隐身模式"><a href="#保存数据和隐身模式" class="header-anchor">#</a> 保存数据和隐身模式</h3> <p>扩展可以使用 Storage API，HTML5 <a href="https://html.spec.whatwg.org/multipage/webstorage.html" target="_blank" rel="noopener noreferrer">webstorage API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或请求保存数据的服务器来保存数据。当扩展程序需要保存某些内容时，请首先考虑它是否来自隐身窗口。默认情况下，扩展程序不会在隐身窗口中运行。</p> <p>隐身模式保证该窗口不会留下任何痕迹。在使用隐身窗口处理数据时，扩展程序应遵守这一承诺。如果扩展程序可以保存浏览历史记录，请不要保存隐身窗口中的历史记录。但扩展程序可以在任何窗口（无论是否隐身）设置存储首选项。</p> <p>要检测窗口是否处于隐身模式，请检查相关的 tabs.Tab 或 windows.Window 对象的 incognito 属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">saveTabData</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>incognito<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    chrome<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token operator">:</span> tab<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="下一步"><a href="#下一步" class="header-anchor">#</a> 下一步</h3> <p>阅读概述并完成入门教程之后，开发人员应该准备开始编写自己的扩展！使用以下资源深入了解自定义 Chrome 的世界。</p> <ul><li><p>在<a href="/guide/debugging.html">调试教程</a>中了解可用于调试扩展的选项。</p></li> <li><p>Chrome 扩展程序可以访问功能强大的 API，而这些 API 均超出开放网络所提供的范围。 <a href="https://developer.chrome.com/api_index" target="_blank" rel="noopener noreferrer">chrome.*API文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将介绍每个 API。</p></li> <li><p><a href="/guide/devguide.html">开发人员指南</a>还有许多其他链接，这些链接指向与高级扩展创建相关的文档。</p></li></ul> <hr> <p>关注 微信公众号「<strong>程序化思维</strong>」 获取最新 Chrome 插件开发教程。</p> <p><img src="/mp1.png" alt="mp_wechat"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/getstarted.html" class="prev">
        入门教程
      </a></span> <span class="next"><a href="/guide/manifest.html">
        Manifest 文件格式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9cda45ef.js" defer></script><script src="/assets/js/2.6a11313b.js" defer></script><script src="/assets/js/11.6ed69219.js" defer></script>
  </body>
</html>
