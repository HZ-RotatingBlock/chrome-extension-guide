<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>保护用户隐私 | Chrome 扩展(插件) 开发教程</title>
    <meta name="generator" content="VuePress 1.5.2">
    <script data-ad-client="ca-pub-6048304318304307" async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="Chrome 扩展(插件) 开发教程 最新 Chrome 扩展官方文档教程中文版">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.8c342066.js" as="script"><link rel="preload" href="/assets/js/2.6aacc90c.js" as="script"><link rel="preload" href="/assets/js/13.f7a743d7.js" as="script"><link rel="prefetch" href="/assets/js/10.23c4d1c2.js"><link rel="prefetch" href="/assets/js/11.b08ddcfb.js"><link rel="prefetch" href="/assets/js/12.07c9eca3.js"><link rel="prefetch" href="/assets/js/14.7ef48ad2.js"><link rel="prefetch" href="/assets/js/15.db642043.js"><link rel="prefetch" href="/assets/js/16.386d0bd7.js"><link rel="prefetch" href="/assets/js/17.0aecd0fb.js"><link rel="prefetch" href="/assets/js/18.2ab91776.js"><link rel="prefetch" href="/assets/js/19.82941375.js"><link rel="prefetch" href="/assets/js/20.33b04450.js"><link rel="prefetch" href="/assets/js/21.613ab858.js"><link rel="prefetch" href="/assets/js/22.5cf44277.js"><link rel="prefetch" href="/assets/js/23.5c20b0c7.js"><link rel="prefetch" href="/assets/js/24.72b1aa38.js"><link rel="prefetch" href="/assets/js/25.6a2f9369.js"><link rel="prefetch" href="/assets/js/26.66a99916.js"><link rel="prefetch" href="/assets/js/27.fa7164c3.js"><link rel="prefetch" href="/assets/js/3.11df5b01.js"><link rel="prefetch" href="/assets/js/4.1ab4e906.js"><link rel="prefetch" href="/assets/js/5.6df1d0c8.js"><link rel="prefetch" href="/assets/js/6.bc297662.js"><link rel="prefetch" href="/assets/js/7.da292c00.js"><link rel="prefetch" href="/assets/js/8.b2654085.js"><link rel="prefetch" href="/assets/js/9.c0874a20.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Chrome 扩展(插件) 开发教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/what-is-extensions.html" class="nav-link">
  官方中文版教程
</a></div><div class="nav-item"><a href="/blog/pornhub-video-download-extension.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/facert/chrome-extension-guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/what-is-extensions.html" class="nav-link">
  官方中文版教程
</a></div><div class="nav-item"><a href="/blog/pornhub-video-download-extension.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/facert/chrome-extension-guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/blog/pornhub-video-download-extension.html" class="sidebar-heading clickable"><span>Blog</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active open"><span>官方教程</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/what-is-extensions.html" class="sidebar-link">什么是扩展</a></li><li><a href="/guide/getstarted.html" class="sidebar-link">入门教程</a></li><li><a href="/guide/overview.html" class="sidebar-link">总览</a></li><li><a href="/guide/manifest.html" class="sidebar-link">Manifest 文件格式</a></li><li><a href="/guide/background_content.html" class="sidebar-link">使用后台脚本管理事件</a></li><li><a href="/guide/user_interface.html" class="sidebar-link">设计交互界面</a></li><li><a href="/guide/content_scripts.html" class="sidebar-link">内容脚本 Content Scripts</a></li><li><a href="/guide/permission_warnings.html" class="sidebar-link">声明权限并警告用户</a></li><li><a href="/guide/options.html" class="sidebar-link">给用户选项</a></li><li><a href="/guide/devguide.html" class="sidebar-link">开发扩展</a></li><li><a href="/guide/performance.html" class="sidebar-link">达到最佳性能</a></li><li><a href="/guide/user_privacy.html" aria-current="page" class="active sidebar-link">保护用户隐私</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/user_privacy.html#保护用户隐私" class="sidebar-link">保护用户隐私</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/user_privacy.html#减少所需的权限" class="sidebar-link">减少所需的权限</a></li><li class="sidebar-sub-header"><a href="/guide/user_privacy.html#选择可选权限" class="sidebar-link">选择可选权限</a></li><li class="sidebar-sub-header"><a href="/guide/user_privacy.html#限制和加密用户信息" class="sidebar-link">限制和加密用户信息</a></li></ul></li></ul></li><li><a href="/guide/tut_debugging.html" class="sidebar-link">调试扩展</a></li><li><a href="/guide/tut_oauth.html" class="sidebar-link">OAuth2</a></li><li><a href="/guide/a11y.html" class="sidebar-link">辅助功能（a11y）</a></li><li><a href="/guide/contentSecurityPolicy.html" class="sidebar-link">内容安全政策（CSP）</a></li><li><a href="/guide/xhr.html" class="sidebar-link">跨域XMLHttpRequest</a></li><li><a href="/guide/messaging.html" class="sidebar-link">消息传递</a></li><li><a href="/guide/nativeMessaging.html" class="sidebar-link">本机消息</a></li><li><a href="/guide/match_patterns.html" class="sidebar-link">匹配模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="保护用户隐私"><a href="#保护用户隐私" class="header-anchor">#</a> 保护用户隐私</h2> <p>如果扩展程序损害了他们的隐私或要求提供需要的更多权限，则用户将不会安装该扩展程序。权限请求应对用户有意义，并且限于实现扩展所需的关键信息。 收集或传输任何用户数据的扩展必须遵守<a href="https://developer.chrome.com/webstore/program_policies#userdata" target="_blank" rel="noopener noreferrer">用户数据隐私策略<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>通过包括以下预防措施来保护和尊重用户，以确保其身份安全。切记：扩展可以访问的数据越少，意外泄漏的数据就越少。</p> <h3 id="减少所需的权限"><a href="#减少所需的权限" class="header-anchor">#</a> 减少所需的权限</h3> <p>扩展可以访问的 API 在 manifest 的权限字段中指定。赋予的权限越多，攻击者拦截信息的途径就越多。 仅列出扩展所依赖的 API，并应考虑侵入性较小的选项。扩展程序请求的权限越少，向用户显示的权限警告就越少。用户更有可能安装带有有限警告的扩展程序。</p> <p>扩展不应通过请求用户当前不需要但将来可能会实现的权限来 “未来证明” 对用户数据的访问。在扩展更新中包含新权限，并考虑将其设为可选。</p> <h4 id="activetab"><a href="#activetab" class="header-anchor">#</a> activeTab</h4> <p>使用 host 权限注入脚本的扩展通常可以被 activeTab 代替。仅当用户调用扩展时，activeTab 权限才会授权扩展对当前活动选项卡的临时访问权限。当用户离开或关闭当前选项卡时，访问被切断。 它是 &lt; all_urls &gt; 的许多用途的替代方法。</p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;name&quot;: &quot;Very Secure Extension&quot;,
    &quot;version&quot;: &quot;1.0&quot;,
    &quot;description&quot;: &quot;Example of a Secure Extension&quot;,
    &quot;permissions&quot;: [&quot;activeTab&quot;],
    &quot;manifest_version&quot;: 2
  }
</code></pre></div><p>在安装过程中，activeTab 权限不显示任何警告消息。</p> <h3 id="选择可选权限"><a href="#选择可选权限" class="header-anchor">#</a> 选择可选权限</h3> <p>通过包含可选权限，使用户能够从扩展中选择所需的功能和权限。如果某个功能对于扩展程序的核心功能不是必需的，请将其设为可选，然后将 API 或域名移至 optional_permissions 字段中。</p> <div class="language- extra-class"><pre class="language-text"><code> {
    &quot;name&quot;: &quot;Very Secure Extension&quot;,
    ...
    &quot;optional_permissions&quot;: [ &quot;tabs&quot;, &quot;https://www.google.com/&quot; ],
    ...
  }
</code></pre></div><p>可选权限可以使扩展向用户解释启用相关功能时为何需要特定权限。该扩展可以为用户提供启用功能的选项。</p> <p><img src="/assets/img/enable_html.1a158f58.png" alt="enable_html"></p> <p>单击确定！将在后台脚本中触发以下事件。</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Permissions must be requested from inside a user gesture, like a button's</span>
    <span class="token comment">// click handler.</span>
    chrome<span class="token punctuation">.</span>permissions<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      permissions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tabs'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      origins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://www.google.com/'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">granted</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// The callback argument will be true if the user granted the permissions.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>granted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// doSomething();</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// doSomethingElse();</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然后，将向用户提示以下请求。</p> <p><img src="/assets/img/enable_permissions.d404b783.png" alt="enable_permissions"></p> <p>也可以在扩展更新中实现。 这样做将使用户可以使用该新功能，而无需禁用该扩展，如果使用新的所需权限进行更新，可能会发生这种禁用的情况。</p> <h3 id="限制和加密用户信息"><a href="#限制和加密用户信息" class="header-anchor">#</a> 限制和加密用户信息</h3> <p>仅请求扩展所需的最少用户数据。扩展程序向用户询问的信息越少，意味着扩展程序受到威胁时所面临的风险就越小。</p> <p>所有请求的用户数据都应谨慎对待。在具有注册域的安全服务器中存储和检索数据。始终使用 HTTPS 进行连接，并避免将敏感的用户数据保留在扩展的客户端中，因为扩展存储未加密。</p> <hr> <p>关注 微信公众号「<strong>程序化思维</strong>」 获取最新 Chrome 插件开发教程。</p> <p><img src="/mp1.png" alt="mp_wechat"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/performance.html" class="prev">
        达到最佳性能
      </a></span> <span class="next"><a href="/guide/tut_debugging.html">
        调试扩展
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8c342066.js" defer></script><script src="/assets/js/2.6aacc90c.js" defer></script><script src="/assets/js/13.f7a743d7.js" defer></script>
  </body>
</html>
